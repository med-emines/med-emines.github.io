<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mohammed El Baraka - Industrial Management & Data Science</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        :root {
            /* --- NEW: Premium Purple Color Scheme --- */
            --primary-color: #A78BFA; /* Premium Purple Accent (Tailwind violet-400) */
            --secondary-color: #1a1a1a; /* Deep Charcoal */
            --text-color: #EAEAEA; /* Off-White Text */
            --bg-color: #121212; /* Rich Black */
            --card-bg: #1F1F1F; /* Slightly Lighter Card Background */
            
            --heading-font: 'Playfair Display', serif;
            --body-font: 'Lato', sans-serif;
        }

        /* --- Base & Fonts --- */
        html { scroll-behavior: smooth; }
        body { 
            font-family: var(--body-font); 
            background-color: var(--bg-color); 
            color: var(--text-color); 
            overflow-x: hidden;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: var(--heading-font);
            color: var(--primary-color);
        }

        /* --- Elegant Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes kenBurns {
            0% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* --- Header --- */
        #header {
            background-color: rgba(18, 18, 18, 0.85);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(167, 139, 250, 0.2); /* UPDATED COLOR */
            transition: all 0.3s ease;
        }
        #header a { color: var(--text-color); transition: color 0.3s; }
        #header a:hover { color: var(--primary-color); }
        #header .brand-name { font-family: var(--heading-font); font-weight: 700; font-size: 1.5rem; color: var(--primary-color); }

        /* --- Hero Section --- */
        .hero {
            position: relative;
            min-height: 100vh;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            overflow: hidden;
            padding: 1.5rem;
        }
        .hero-background {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://i.pinimg.com/736x/52/c1/a7/52c1a768bafdfba3bdb2a043b1afe4aa.jpg') no-repeat center center;
            background-size: cover;
            animation: kenBurns 15s infinite alternate ease-in-out;
        }
        .hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(ellipse at center, rgba(18,18,18,0.3) 0%, rgba(18,18,18,0.95) 100%);
            z-index: 1;
        }
        .hero-content {
            position: relative;
            z-index: 2;
            animation: fadeIn 1.5s ease-out 0.5s forwards;
            opacity: 0;
        }
        .hero-content h1 {
            font-size: 3rem; /* Adjusted for long text */
             md:font-size: 4.5rem;
            color: white;
            font-weight: bold;
            text-shadow: 0px 0px 20px rgba(0,0,0,0.9);
        }
         .hero-content p {
            font-size: 1.1rem;
             md:font-size: 1.25rem;
            max-width: 800px; /* Wider for professional summary */
            margin: 1rem auto 2rem;
            text-shadow: 0px 0px 15px rgba(0,0,0,0.9);
            color: #ccc;
        }

        /* --- Generic Button Style --- */
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: var(--bg-color);
            font-weight: 700;
            padding: 12px 30px;
            font-size: 1rem;
            border-radius: 50px;
            transition: all 0.4s ease;
            box-shadow: 0 0 15px rgba(167, 139, 250, 0.4); /* UPDATED COLOR */
        }
        .btn-primary:hover {
            background-color: white;
            border-color: white;
            transform: translateY(-5px);
            box-shadow: 0 0 25px rgba(167, 139, 250, 0.8); /* UPDATED COLOR */
        }
        
        /* --- Section Styling --- */
        section { animation: fadeIn 1s ease-out forwards; opacity: 0; }
        .section-title {
            text-align: center;
            margin-bottom: 4rem;
            font-size: 3rem;
            position: relative;
        }
        .section-title::after {
            content: '♦'; display: block; color: var(--primary-color);
            font-size: 1.5rem; margin: 10px auto 0;
        }

        /* --- Project & Leadership Card Styling --- */
        .item-card {
            background-color: var(--card-bg);
            border: 1px solid rgba(167, 139, 250, 0.2); /* UPDATED COLOR */
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            height: 100%;
            display: flex; flex-direction: column;
        }
        .item-card.clickable { cursor: pointer; }
        .item-card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            border-color: var(--primary-color);
        }
        .item-card .card-body { padding: 1.75rem; display: flex; flex-direction: column; flex-grow: 1; }
        .item-card .card-title { color: var(--primary-color); font-size: 1.5rem; }
        .item-card .card-text { color: #ccc; flex-grow: 1; }
        
        /* --- Skill Tag Styling --- */
        .skill-tag { 
            background: var(--card-bg); color: var(--text-color); border: 1px solid rgba(167, 139, 250, 0.2); /* UPDATED COLOR */
            transition: all 0.3s ease; cursor: pointer;
        }
        .skill-tag:hover {
            transform: scale(1.1); background: var(--primary-color); color: var(--bg-color);
            box-shadow: 0 0 25px rgba(167, 139, 250, 0.7); /* UPDATED COLOR */
            border-color: var(--primary-color);
        }

        /* --- Modal Styling --- */
        .modal { transition: opacity 0.25s ease; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); }
        .modal-content { 
            background: var(--card-bg);
            border: 1px solid rgba(167, 139, 250, 0.3); /* UPDATED COLOR */
            transition: transform 0.25s ease; 
            border-radius: 15px;
        }
        .modal-header h3 { color: var(--primary-color); font-family: var(--heading-font); }
        .modal-body { color: #ddd; }
        .modal-close-btn { color: #888; transition: color 0.3s; }
        .modal-close-btn:hover { color: white; }

        /* Loader & PDF Viewer */
        .loader { border: 4px solid #30363d; border-top: 4px solid var(--primary-color); }
        .textLayer { position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; opacity: 0.2; }
        .textLayer > span { color: transparent; position: absolute; white-space: pre; cursor: text; transform-origin: 0% 0%; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .loader { animation: spin 1s linear infinite; border-radius: 50%; width: 40px; height: 40px; }
    </style>
</head>

<body id="page-top" class="antialiased">

    <header class="fixed w-full top-0 z-50" id="header">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#page-top" class="brand-name">
                Mohammed El Baraka
            </a>
            <nav class="hidden md:flex space-x-6 font-bold">
                <a href="#about">About</a>
                <a href="#projects">Projects</a>
                <a href="#skills">Skills</a>
                <a href="#leadership">Leadership</a>
                <a href="#contact">Contact</a>
            </nav>
        </div>
    </header>

    <main>
        <section id="hero" class="hero">
             <div class="hero-background"></div>
             <div class="hero-content">
                <img src="mmee.jpg" alt="Mohammed El Baraka" class="w-32 h-32 md:w-40 md:h-40 rounded-full mx-auto mb-6 border-4" style="border-color: var(--primary-color);">
                <h1>
                    Industrial Management,<br>& Data Science
                </h1>
                <p>
                    An Engineering student at EMINES-UM6P specializing in Industrial Management with a passion for Optimization, Data Science, and leveraging technology to solve real-world challenges.
                </p>
                <div>
                    <a href="#projects" class="btn-primary">
                        View My Work
                    </a>
                </div>
            </div>
        </section>

        <section id="about" class="py-24 scroll-mt-16">
            <div class="container mx-auto px-6">
                <h2 class="section-title">About Me</h2>
                <div class="flex flex-col md:flex-row items-center gap-12">
                    <div class="md:w-2/3 text-lg text-gray-300 leading-relaxed space-y-4">
                        <p>Hello! I'm Mohammed El Baraka, an Industrial Management engineering student at the prestigious Mohammed VI Polytechnic University (UM6P). My academic journey, beginning with an intensive program in Mathematics and Physics, has instilled in me a strong analytical and problem-solving mindset.</p>
                        <p>I am driven by the challenge of untangling complex problems, particularly through the application of Data Science, Machine Learning, and Optimization algorithms. My work philosophy is centered on bridging the gap between theoretical knowledge and practical application to create tangible results.</p>
                        <p>I am a proactive leader, fluent in Arabic, French, and English, and always eager to learn, collaborate, and apply my skills to impactful scenarios.</p>
                        <div class="mt-8">
                             <button onclick="viewPdf('https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/my_resume.pdf', 'My Resume')" class="btn-primary">📄 View My Resume</button>
                        </div>
                    </div>
                    <div class="md:w-1/3 flex justify-center p-4">
                        <img src="123.jpg" alt="A picture of Mohammed El Baraka" class="rounded-lg shadow-2xl w-full max-w-sm border-2" style="border-color: rgba(167, 139, 250, 0.3);">
                    </div>
                </div>
            </div>
        </section>

        <section id="projects" class="py-24 bg-black/20 scroll-mt-16">
            <div class="container mx-auto px-6">
                <h2 class="section-title">My Projects</h2>
                <div id="project-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Project cards will be injected here by JavaScript -->
                </div>
            </div>
        </section>

        <section id="skills" class="py-24 scroll-mt-16">
            <div class="container mx-auto px-6">
                <h2 class="section-title">Technical Skills</h2>
                <div id="skills-container" class="max-w-5xl mx-auto flex flex-wrap justify-center gap-4">
                     <!-- Skill tags will be injected here by JavaScript -->
                </div>
            </div>
        </section>

        <section id="leadership" class="py-24 bg-black/20 scroll-mt-16">
            <div class="container mx-auto px-6">
                <h2 class="section-title">Leadership & Activities</h2>
                <div id="leadership-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Leadership cards will be injected here by JavaScript -->
                </div>
            </div>
        </section>

        <section id="contact" class="py-24 scroll-mt-16">
             <div class="container mx-auto px-6 text-center">
                <h2 class="section-title">Get In Touch</h2>
                <p class="text-gray-400 text-lg mb-8 max-w-2xl mx-auto">I'm always open to discussing new projects, creative ideas, or opportunities. Let's connect.</p>
                <button onclick="openContactModal()" class="btn-primary mb-10">
                    Contact Me
                </button>
            </div>
        </section>
    </main>

    <footer class="py-6 text-center text-gray-500 border-t" style="border-color: rgba(167, 139, 250, 0.2);">
        <p>© 2025 Mohammed El Baraka. All Rights Reserved.</p>
    </footer>

    <!-- AI/Skill Modal -->
    <div id="ai-modal" class="modal fixed inset-0 z-50 flex items-center justify-center opacity-0 pointer-events-none p-4">
        <div class="modal-content w-full max-w-2xl rounded-lg shadow-lg p-6 md:p-8 transform scale-95">
            <div class="modal-header flex justify-between items-center mb-4">
                <h3 id="modal-title" class="text-2xl font-bold"></h3>
                <button onclick="closeModal('ai-modal')" class="modal-close-btn text-3xl">×</button>
            </div>
            <div id="modal-body" class="modal-body leading-relaxed max-h-[60vh] overflow-y-auto"></div>
            <div id="modal-footer" class="mt-6"></div>
        </div>
    </div>
    
    <!-- Leadership Modal -->
    <div id="leadership-modal" class="modal fixed inset-0 z-50 flex items-center justify-center opacity-0 pointer-events-none p-4">
        <div class="modal-content w-full max-w-2xl rounded-lg shadow-lg transform scale-95">
            <div class="modal-header flex justify-between items-center p-6 border-b" style="border-color: rgba(167, 139, 250, 0.2);">
                <h3 id="leadership-modal-title" class="text-2xl font-bold"></h3>
                <button onclick="closeModal('leadership-modal')" class="modal-close-btn text-3xl">×</button>
            </div>
            <div class="modal-body p-6 leading-relaxed">
                <img id="leadership-modal-img" src="" alt="Activity image" class="w-full h-auto max-h-80 object-cover rounded-lg mb-4">
                <p id="leadership-modal-desc"></p>
            </div>
        </div>
    </div>


    <!-- PDF Modal -->
    <div id="pdf-modal" class="modal fixed inset-0 z-50 flex items-center justify-center opacity-0 pointer-events-none">
        <div class="modal-content w-full h-full max-w-5xl rounded-lg shadow-lg p-4 md:p-6 flex flex-col">
             <div class="flex flex-wrap justify-between items-center gap-4 mb-4 flex-shrink-0">
                <h3 id="pdf-modal-title" class="text-2xl font-bold text-white">PDF Viewer</h3>
                <div class="flex items-center gap-2 sm:gap-4">
                    <button onclick="zoomOut()" class="px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded-md transition-colors" title="Zoom Out">➖</button>
                    <span id="zoom-level" class="text-sm font-medium w-16 text-center">100%</span>
                    <button onclick="zoomIn()" class="px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded-md transition-colors" title="Zoom In">➕</button>
                    <button onclick="downloadPdf()" class="px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded-md transition-colors" title="Download">📥</button>
                    <button onclick="openInNewTab()" class="px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded-md transition-colors" title="Open in New Tab">↗️</button>
                </div>
                <button onclick="closeModal('pdf-modal')" class="text-3xl text-gray-400 hover:text-white">×</button>
            </div>
            <div id="pdf-viewer" class="w-full h-full overflow-auto rounded bg-black/50"></div>
        </div>
    </div>
    
    <!-- Contact Modal -->
    <div id="contact-modal" class="modal fixed inset-0 z-50 flex items-center justify-center opacity-0 pointer-events-none p-4">
        <div class="modal-content w-full max-w-md rounded-lg shadow-lg p-8 transform scale-95">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-white">Contact Me</h3>
                <button onclick="closeModal('contact-modal')" class="modal-close-btn text-3xl">×</button>
            </div>
            <div class="space-y-4">
                 <a href="mailto:mohammed.elbaraka@emines.um6p.ma" class="block w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-all">Send an Email</a>
                <a href="https://wa.me/+212666774426" target="_blank" class="block w-full text-center bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg transition-all">Message on WhatsApp</a>
                <a href="tel:+212666774426" class="block w-full text-center bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-all">Make a Call</a>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js`;

        const projectsData = [
            { id: 'mental-health-analytics', title: 'Predictive Analytics for Student Mental Health', description: 'Developed predictive models using questionnaire and text data to assess student mental health, achieving high accuracy in predicting anxiety, depression, and stress levels.', technologies: ['Machine Learning', 'NLP', 'Python', 'Scikit-learn', 'NLTK', 'Classification Models'], reportUrl: 'https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/reports/report_analytics_edge.pdf', presentationUrl: 'https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/presentations/presentation_analytics_edge.pdf' },
            { id: 'red-fruit-optimization', title: 'Optimization of Red Fruit Production', description: 'Designed and implemented a Linear Programming model to maximize profit for red fruit production in greenhouses, considering various constraints and scenarios.', technologies: ['Linear Programming', 'Python', 'Pulp', 'Optimization Modeling', 'Algorithm Design'], reportUrl: 'https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/reports/report_optimization.pdf', presentationUrl: 'https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/presentations/presentation_optimization.pdf' },
            { id: 'powerbi-dashboard', title: 'Bank Statement Integration with Power BI', description: 'Developed an interactive Power BI dashboard to integrate and visualize key financial metrics from bank statements and delivery notes for a connected data view.', technologies: ['Power BI', 'Excel', 'Data Analysis', 'Dashboard Design', 'VBA'], reportUrl: 'https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/reports/report_power_bi.pdf', presentationUrl: 'https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/presentations/presentation_power_bi.pdf' },
            { id: 'rsa-cryptography', title: 'Attacks Against Shared Module RSA', description: 'Studied and simulated attacks against the RSA cryptosystem, focusing on vulnerabilities from shared modules to demonstrate cryptographic weaknesses.', technologies: ['Cryptography', 'RSA Algorithm', 'Cryptanalysis', 'Number Theory', 'SageMath', 'Python'], reportUrl: 'https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/reports/report_cryptography.pdf', presentationUrl: 'https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/presentations/presentation_cryptography.pdf' },
            { id: 'biomedical-diffusion', title: 'Oxygen Diffusion in Pulmonary Acinus', description: 'Conducted a biomedical engineering project to model oxygen diffusion in the pulmonary acinus, resolving the 2D diffusion equation using numerical methods.', technologies: ['Mathematical Modeling', 'Numerical Methods', 'Python', 'NumPy', 'SciPy', 'Matplotlib'], reportUrl: 'https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/reports/report_biomedical_engineering.pdf', presentationUrl: 'https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/presentations/presentation_biomedical_engineering.pdf' },
            { id: 'robotics-vision', title: 'Robotics and Image Detection', description: 'Developed a complete robotic system with image detection capabilities, from 3D modeling in SolidWorks to implementing image processing algorithms in Python.', technologies: ['Robotics', 'Python', 'Image Detection', 'SolidWorks', 'OpenCV'], reportUrl: 'https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/reports/report_robotics.pdf', presentationUrl: 'https://raw.githubusercontent.com/mohammed-el-baraka/mohammed-el-baraka.github.io/main/presentations/presentation_robotics.pdf' },
            { id: 'robotics-vision', title: 'Robotics and Image Detection', description: 'Developed a complete robotic system with image detection capabilities, from 3D modeling in SolidWorks to implementing image processing algorithms in Python.', technologies: ['Robotics', 'Python', 'Image Detection', 'SolidWorks', 'OpenCV'], reportUrl: 'path/to/robotics_report.pdf', presentationUrl: 'https://drive.google.com/file/d/1wfSLCAMlytJtU9o-8Wmbm4LTd2gfQ4Fz/view?usp=drive_link' }
        ];

        const skillsData = [ 'Python', 'Java', 'C', 'JavaScript', 'Bash', 'SQL', 'HTML', 'CSS', 'Machine Learning', 'Data Analysis', 'NLP', 'Optimization Algorithms', 'Linear Programming', 'Power BI', 'VBA', 'Excel', 'Robotics', 'SolidWorks', 'QGIS', 'Image Detection', 'Cryptography', 'Cybersecurity', 'Pentesting Tools', 'Django', 'SageMath', 'Manim', 'Overleaf', 'Git', 'AI Prompt Engineering' ];
        
        const leadershipData = [
            { id: 'rubiks-club', title: "UM6P Rubik's Cube Club", role: "President", imageUrl: 'https://via.placeholder.com/600x400.png/1F1F1F/A78BFA?text=Rubiks+Club+Image', description: "As President, I led the club's activities, organized workshops, and fostered a community of problem-solvers. [ADD MORE DETAILS HERE]" },
            { id: 'eplus-club', title: "E++ Club, EMINES", role: "Sponsoring Manager", imageUrl: 'https://via.placeholder.com/600x400.png/1F1F1F/A78BFA?text=E++Club+Image', description: "I was responsible for securing sponsorships and managing partnerships to fund our club's technical projects and events. [ADD MORE DETAILS HERE]" },
            { id: 'eastro-club', title: "E-Astronomy Club, EMINES", role: "Logistics Manager", imageUrl: 'https://via.placeholder.com/600x400.png/1F1F1F/A78BFA?text=Astronomy+Club+Image', description: "I coordinated the logistics for observation nights and educational seminars, ensuring all equipment and resources were available. [ADD MORE DETAILS HERE]" },
            { id: 'rotaract-club', title: "ROTARACT EMINES Club", role: "Communication & Content Manager", imageUrl: 'https://via.placeholder.com/600x400.png/1F1F1F/A78BFA?text=Rotaract+Image', description: "I managed the club's social media presence and created engaging content to promote our community service projects. [ADD MORE DETAILS HERE]" },
            { id: 'pingpong-club', title: "UM6P Ping Pong Club", role: "Logistics Manager", imageUrl: 'https://via.placeholder.com/600x400.png/1F1F1F/A78BFA?text=PingPong+Club+Image', description: "I organized tournaments and practice sessions, handling all logistical aspects from scheduling to equipment management. [ADD MORE DETAILS HERE]" },
            { id: 'university-sports', title: "University Sports", role: "Player for Handball, Volleyball, and Football teams", imageUrl: 'https://via.placeholder.com/600x400.png/1F1F1F/A78BFA?text=Sports+Image', description: "As an active member of multiple university sports teams, I developed strong teamwork, discipline, and leadership skills. [ADD MORE DETAILS HERE]" }
        ];

        // --- MODAL & UI ---
        const loaderHTML = `<div class="flex justify-center items-center h-32"><div class="loader"></div></div>`;
        
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            modal.classList.remove('opacity-0', 'pointer-events-none');
            modal.querySelector('.modal-content').classList.remove('scale-95');
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            modal.classList.add('opacity-0', 'pointer-events-none');
            modal.querySelector('.modal-content').classList.add('scale-95');
        }

        function openContactModal() { openModal('contact-modal'); }

        // --- DYNAMIC CONTENT GENERATION ---
        document.addEventListener('DOMContentLoaded', () => {
            const projectGrid = document.getElementById('project-grid');
            projectsData.forEach(project => {
                const card = document.createElement('div');
                card.className = 'item-card';
                card.innerHTML = `
                    <div class="card-body">
                        <div>
                            <h3 class="card-title text-xl mb-2">${project.title}</h3>
                            <p class="card-text text-gray-400 mb-4 text-sm">${project.description}</p>
                            <p class="text-xs text-gray-500 mb-4"><b>Technologies:</b> ${project.technologies.join(', ')}</p>
                        </div>
                        <div class="mt-auto pt-4 grid grid-cols-2 gap-2 text-sm">
                            <button onclick="viewPdf('${project.reportUrl}', '${project.title} Report')" class="bg-gray-700/50 hover:bg-gray-600/50 p-2 rounded-md transition-colors">View Report</button>
                            <button onclick="viewPdf('${project.presentationUrl}', '${project.title} Presentation')" class="bg-gray-700/50 hover:bg-gray-600/50 p-2 rounded-md transition-colors">View Presentation</button>
                            <button onclick="explainProject('${project.id}')" class="bg-violet-700/80 hover:bg-violet-600/80 p-2 rounded-md transition-colors col-span-1">✨ Explain</button>
                            <button onclick="summarizeProject('${project.id}')" class="bg-purple-700/80 hover:bg-purple-600/80 p-2 rounded-md transition-colors col-span-1">✨ Summarize</button>
                        </div>
                    </div>`;
                projectGrid.appendChild(card);
            });

            const skillsContainer = document.getElementById('skills-container');
            skillsData.forEach(skill => {
                const tag = document.createElement('span');
                tag.className = 'skill-tag font-semibold px-4 py-2 rounded-full text-base';
                tag.textContent = skill;
                tag.onclick = () => showSkillDetails(skill);
                skillsContainer.appendChild(tag);
            });
            
            const leadershipGrid = document.getElementById('leadership-grid');
            leadershipData.forEach(activity => {
                 const card = document.createElement('div');
                 card.className = 'item-card clickable';
                 card.onclick = () => openLeadershipModal(activity.id);
                 card.innerHTML = `
                    <div class="card-body text-center">
                        <h3 class="card-title text-xl">${activity.title}</h3>
                        <p class="font-semibold" style="color: var(--primary-color);">${activity.role}</p>
                    </div>`;
                leadershipGrid.appendChild(card);
            });

        });

        function openLeadershipModal(activityId) {
            const activity = leadershipData.find(item => item.id === activityId);
            if (!activity) return;

            document.getElementById('leadership-modal-title').textContent = activity.title;
            document.getElementById('leadership-modal-img').src = activity.imageUrl;
            document.getElementById('leadership-modal-img').alt = activity.title;
            document.getElementById('leadership-modal-desc').textContent = activity.description;
            
            openModal('leadership-modal');
        }


        // --- COMPLETE PDF VIEWER LOGIC ---
        let pdfDoc = null;
        let currentScale = 1.0;
        let currentPdfUrl = '';
        const pdfViewer = document.getElementById('pdf-viewer');

        async function viewPdf(url, title) {
            currentPdfUrl = url;
            document.getElementById('pdf-modal-title').textContent = title;
            pdfViewer.innerHTML = loaderHTML;
            openModal('pdf-modal');
            try {
                pdfDoc = await pdfjsLib.getDocument(url).promise;
                const firstPage = await pdfDoc.getPage(1);
                const viewport = firstPage.getViewport({ scale: 3 });
                currentScale = pdfViewer.clientWidth / viewport.width;
                await renderAllPages();
            } catch (error) {
                pdfViewer.innerHTML = `<p class="text-red-400 text-center">Sorry, the PDF could not be loaded. Error: ${error.message}</p>`;
            }
        }

        async function renderAllPages() {
            if (!pdfDoc) return;
            pdfViewer.innerHTML = '';
            document.getElementById('zoom-level').textContent = `${Math.round(currentScale * 100)}%`;
            for (let pageNum = 1; pageNum <= pdfDoc.numPages; pageNum++) {
                const page = await pdfDoc.getPage(pageNum);
                const viewport = page.getViewport({ scale: currentScale });
                const pageContainer = document.createElement('div');
                pageContainer.className = 'mx-auto mb-4 relative';
                pageContainer.style.width = `${viewport.width}px`;
                pageContainer.style.height = `${viewport.height}px`;
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                const devicePixelRatio = window.devicePixelRatio || 1;
                canvas.width = viewport.width * devicePixelRatio;
                canvas.height = viewport.height * devicePixelRatio;
                canvas.style.width = '100%';
                canvas.style.height = '100%';
                pageContainer.appendChild(canvas);
                const renderContext = { canvasContext: context, viewport: viewport, transform: devicePixelRatio !== 1 ? [devicePixelRatio, 0, 0, devicePixelRatio, 0, 0] : null };
                const textLayerDiv = document.createElement('div');
                textLayerDiv.className = 'textLayer';
                pageContainer.appendChild(textLayerDiv);
                pdfViewer.appendChild(pageContainer);
                await page.render(renderContext).promise;
                const textContent = await page.getTextContent();
                pdfjsLib.renderTextLayer({ textContent: textContent, container: textLayerDiv, viewport: viewport, textDivs: [] });
            }
        }

        function zoomIn() { if (pdfDoc) { currentScale += 0.2; renderAllPages(); } }
        function zoomOut() { if (pdfDoc && currentScale > 0.2) { currentScale -= 0.2; renderAllPages(); } }
        function downloadPdf() {
            if (!currentPdfUrl) return;
            const link = document.createElement('a');
            link.href = currentPdfUrl;
            link.download = currentPdfUrl.split('/').pop() || 'download.pdf';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        function openInNewTab() { if (currentPdfUrl) { window.open(currentPdfUrl, '_blank'); } }

        // --- SECURE GEMINI AI INTEGRATION ---
        async function callGemini(prompt) {
            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML = loaderHTML;
            openModal('ai-modal');
            try {
                const response = await fetch('/.netlify/functions/gemini', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: prompt })
                });
                if (!response.ok) throw new Error(`API request failed with status ${response.status}`);
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0) {
                    let formattedText = result.candidates[0].content.parts[0].text;
                    formattedText = formattedText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\* (.*?)\n/g, '<li class="ml-4 list-disc">$1</li>').replace(/\n/g, '<br>');
                    modalBody.innerHTML = `<div class="prose prose-invert max-w-none">${formattedText}</div>`;
                } else {
                    throw new Error("No content received from API.");
                }
            } catch (error) {
                console.error("Gemini API call failed:", error);
                modalBody.innerHTML = `<p class="text-red-400">Sorry, something went wrong. This may be due to a missing or invalid API key in the server configuration. <br><br>${error.message}</p>`;
            }
        }

        function getProjectById(projectId) { return projectsData.find(p => p.id === projectId); }

        function explainProject(projectId) {
            const project = getProjectById(projectId);
            if (!project) return;
            document.getElementById('modal-title').innerText = `✨ Explaining: ${project.title}`;
            document.getElementById('modal-footer').innerHTML = '';
            const prompt = `Explain the following project in simple, engaging terms for a non-technical audience like a recruiter or hiring manager. Focus on the real-world application, the problem it solves, and the business value. Keep it concise (2-3 short paragraphs).\n\nProject Title: "${project.title}"\nDescription: "${project.description}"\nTechnologies Used: "${project.technologies.join(', ')}"`;
            callGemini(prompt);
        }

        function summarizeProject(projectId) {
            const project = getProjectById(projectId);
            if (!project) return;
            document.getElementById('modal-title').innerText = `✨ Summarizing: ${project.title}`;
            document.getElementById('modal-footer').innerHTML = '';
            const prompt = `Summarize this project in one or two compelling sentences. Focus on the core achievement.\n\nProject Title: "${project.title}"\nDescription: "${project.description}"`;
            callGemini(prompt);
        }

        function showSkillDetails(skillName) {
            document.getElementById('modal-title').innerText = `💡 Skill: ${skillName}`;
            const modalFooter = document.getElementById('modal-footer');
            modalFooter.innerHTML = `<button onclick="showProjectsForSkill('${skillName}')" class="w-full text-center bg-violet-700/80 hover:bg-violet-600/80 text-white font-bold py-2 px-4 rounded-lg">Show Projects Using This Skill</button>`;
            const prompt = `Explain the technical skill "${skillName}" in simple terms. What is it used for in the industry? Keep it to 2-3 sentences.`;
            callGemini(prompt);
        }
        
        function showProjectsForSkill(skillName) {
            document.getElementById('modal-title').innerText = `🚀 Projects with ${skillName}`;
            document.getElementById('modal-footer').innerHTML = '';
            const projectsString = projectsData.map(p => `Title: ${p.title}, Description: ${p.description}, Technologies: ${p.technologies.join(', ')}`).join('\n\n');
            const prompt = `Based on the following list of projects, identify which ones used the skill "${skillName}". For each project you identify, list its title and briefly (one sentence) explain how "${skillName}" was specifically applied in that context. Format the output clearly.\n\n---PROJECTS---\n${projectsString}`;
            callGemini(prompt);
        }

        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal('ai-modal');
                closeModal('pdf-modal');
                closeModal('contact-modal');
                closeModal('leadership-modal');
            }
        });
    </script>
</body>
</html>
